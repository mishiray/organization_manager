<?php
/* Smarty version 3.1.39, created on 2021-12-11 00:47:20
  from 'C:\wamp64\www\organization-management\site\templates\base\scripts.html' */

/* @var Smarty_Internal_Template $_smarty_tpl */
if ($_smarty_tpl->_decodeProperties($_smarty_tpl, array (
  'version' => '3.1.39',
  'unifunc' => 'content_61b3e7087905d8_00400364',
  'has_nocache_code' => false,
  'file_dependency' => 
  array (
    'bd0c6f837ce1ded891b0b48bc248cc9530131a31' => 
    array (
      0 => 'C:\\wamp64\\www\\organization-management\\site\\templates\\base\\scripts.html',
      1 => 1635414925,
      2 => 'file',
    ),
  ),
  'includes' => 
  array (
  ),
),false)) {
function content_61b3e7087905d8_00400364 (Smarty_Internal_Template $_smarty_tpl) {
if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('login','admin'))) {?>
<!--===============================================================================================-->
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/jquery/jquery-3.2.1.min.js"><?php echo '</script'; ?>
>
<!--===============================================================================================-->
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/animsition/js/animsition.min.js"><?php echo '</script'; ?>
>
<!--===============================================================================================-->
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/bootstrap/js/popper.js"><?php echo '</script'; ?>
>
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/bootstrap/js/bootstrap.min.js"><?php echo '</script'; ?>
>
<!--===============================================================================================-->
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/select2/select2.min.js"><?php echo '</script'; ?>
>
<!--===============================================================================================-->
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/daterangepicker/moment.min.js"><?php echo '</script'; ?>
>
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/daterangepicker/daterangepicker.js"><?php echo '</script'; ?>
>
<!--===============================================================================================-->
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/vendor/countdowntime/countdowntime.js"><?php echo '</script'; ?>
>
<!--===============================================================================================-->
	<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/login/js/main.js"><?php echo '</script'; ?>
>
<?php }
echo '<script'; ?>
>
    var pagelayer_ajaxurl = "<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/wp-admin/admin-ajax.php?";
    var pagelayer_global_nonce = "aeae691359";
    var pagelayer_server_time = 1607179629;
    var pagelayer_is_live = "";
    var pagelayer_facebook_id = "";
    var pagelayer_settings = {"post_types":["post","page"],"enable_giver":"1","max_width":1170,"tablet_breakpoint":768,"mobile_breakpoint":360,"body_font":false,"body":false,"h1":false,"h2":false,"h3":false,"h4":false,"h5":false,"h6":false,"color":false,"sidebar":false};
    var pagelayer_recaptch_lang = "";
<?php echo '</script'; ?>
>

<?php echo '<script'; ?>
 src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"><?php echo '</script'; ?>
>

<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/jquery.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/jquery-migrate-3.0.1.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/popper.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/bootstrap.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/jquery.easing.1.3.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/jquery.waypoints.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/jquery.stellar.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/owl.carousel.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/jquery.magnific-popup.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/jquery.animateNumber.min.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/scrollax.min.js"><?php echo '</script'; ?>
>
<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('events'))) {?>
 <?php echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/calendar/script.js"><?php echo '</script'; ?>
>
<?php }
echo '<script'; ?>
 src="<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/lib/common/js-new/main.js"><?php echo '</script'; ?>
>

<?php echo '<script'; ?>
>
    jQuery(window).bind('scroll', function() {
var wwd = jQuery(window).width();
if( wwd > 939 ){
    var navHeight = jQuery( window ).height() - 575;
            if (jQuery(window).scrollTop() > navHeight) {
        jQuery(".header").addClass('fixed');
    }else {
        jQuery(".header").removeClass('fixed');
    }
        }
});	

//$("#myModal1").modal({"backdrop": "static"});


jQuery(window).load(function() {   
	jQuery('.owl-carousel').owlCarousel({
		autoplay: true,
                autoplayTimeout:2000,
                autoplayHoverPause:true,
                loop: true,
                margin: 10,
                responsiveClass: true,
                responsive: {
                    0:{
                        items: 1,
                        nav: false,
                        dots: true,
                        margin: 0
                    },
                    600:{
                        items: 2,
                        nav: false,
                        dots: true,
                        margin: 25
                    },
                    768: {
                        items: 3,
                        nav: false,
                        dots: true,
                        margin: 25
                    }
                }
	});
});


jQuery(document).ready(function() {

jQuery('.link').on('click', function(event){
var $this = jQuery(this);
if($this.hasClass('clicked')){
  $this.removeAttr('style').removeClass('clicked');
} else{
  $this.css('background','#7fc242').addClass('clicked');
}
});

});
<?php echo '</script'; ?>
>
<?php echo '<script'; ?>
>
	 $(window).on('load', function() {
        $('#exampleModal').modal('show');
    });

	
	<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('gallery'))) {?>
		
		$(document).on('click', '.imageSource', function() {
			var modal = $("#galleryModal");
			var img = $(this);
			$("#galleryModal").css("display","block");
			$("#modalImage").attr('src', $(this).attr('src'));
			$("#caption").html($(this).attr('desc'));

		// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];

		// When the user clicks on <span> (x), close the modal
		span.onclick = function() {
			$("#galleryModal").css("display","none");
		}

		});

		
	<?php }?>
	

	<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('admin','login'))) {?>
	const togglePassword = document.querySelector('#togglePassword');
	const password = document.querySelector('#dataPass');
	
	togglePassword.addEventListener('click', function (e) {
		// toggle the type attribute
		const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
		password.setAttribute('type', type);
		// toggle the eye slash icon
		this.classList.toggle('fa-eye-slash');
	});
	<?php }?>


	/*Event Executor*/
	const getChats = ()=>{
		let arguement = {
			send: true,
			sendMode: 'getchat', 
		};
		$.post('<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/chat_connect', arguement, function(resp) {
			//console.log(resp);
			let chatResp = JSON.parse(resp);
			if (chatResp.code == 4) {
				$('.chatApp .chatSave').addClass('chatContinue');
				$('.chatApp .chatSave').removeClass('chatStart');
				$('.chatApp .chatSave').text('Send');
				$('.chatApp .chatEnd').text('End');
				$('.chat-careButton').html(`<i title="You have an ongoing chat" class="fa fa-commenting fa-2x">1</i>`);
				if (chatResp?.chatThread) {
					$('.chatFr').addClass('invisible d-none');
					$('.chatFr2').removeClass('invisible d-none');
					$('.chatApp .chatListing').empty();
					for (chatTh of chatResp.chatThread) {
						$('.chatApp .chatListing').prepend(`<div class="chatListMsg ${chatTh.sender == chatResp.chatParent.sender? `meChat pull-left`: `youChat pull-right` }">
                  			<strong>${chatTh.sender == chatResp.chatParent.sender? `Me:`: `Admin` } </strong>${chatTh.message}</div><hr/>`);
					}
              		$('.chatMsgLabel').text('Enter your reply here...');
				} else {

				}
			}else if(chatResp.code == -4 || chatResp.code == -3){
				$('.chatApp .chatSave').removeClass('chatContinue');
				$('.chatApp .chatSave').addClass('chatStart');
				$('.chatApp .chatSave').text('Start');
				$('.chatApp .chatEnd').text('Close');
				$('.chat-careButton').html(`<i class="fa fa-headphones fa-2x"></i>`);
				$('.chatFr').removeClass('invisible d-none');
				$('.chatFr2').addClass('invisible d-none');
			}
		});
	}

		/*Chat Logics*/
		setInterval(getChats, 5000);
			$(document).on('click', '.chat-careButton', function() {
				$('.chatApp').toggleClass('invisible');
				$(this).toggleClass('invisible');					
			});
			$(document).on('click', '.chatApp .chatClose, .chatApp .chatEnd', function() {
				$('.chatApp').addClass('invisible');
				$('.chat-careButton').removeClass('invisible');
				if ($(this).hasClass('chatEnd')){
					$('.messageTitle').val('');
					if ($(this).text() == 'End') {
						let deleConf=confirm(`Are you sure to end this chat thread?\n you will not be able to continue with this thread once ended`);
					    if (deleConf!==true) {
					      return false;
					    }
						let arguement = {
							send: true,
							sendMode: 'endchat'
						};
						$.post('<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/chat_connect', arguement, function(resp) {
							//console.log(resp);
							let chatResp = JSON.parse(resp);
							if (chatResp.code == 3) {
								alert(`chat session successfully ended`)
								$('.chatApp .chatSave').removeClass('chatContinue');
								$('.chatApp .chatSave').addClass('chatStart');
								$('.chatApp .chatSave').text('Start');
								$('.chatApp .chatEnd').text('Close');
								$('.chatFr').removeClass('invisible d-none');
								$('.chatFr2').addClass('invisible d-none');
								$('.chat-careButton').html(`<i class="fa fa-headphones fa-2x"></i>`);
							}
						});
					}  
				}
			});
			$(document).on('click', '.chatApp .chatSave.chatStart, .chatApp .chatSave.chatContinue', function() {
				
				//console.log("im clicked");

				if ($(this).hasClass('chatStart')){
					let chatMessage = $('#chatMsg').val();
					let chatEmail = $('#chatEmail').val();
					let chatName = $('#chatName').val();
					let arguement = {
						send: true,
						sendMode: 'start',  
						message: chatMessage,  
						email: chatEmail,
						name: chatName
					};
					
					//console.log("im in");

					if (chatMessage && chatEmail && chatName) {
						$.post('<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/chat_connect', arguement, function(resp) {
							//console.log(resp);
							let chatResp = JSON.parse(resp);

							if (chatResp.code == 1) {
								$('.chatApp .chatSave').addClass('chatContinue');
								$('.chatApp .chatSave').removeClass('chatStart');
								$('.chatApp .chatSave').text('Send');
								$('.chatApp .chatEnd').text('End');
								$('.chat-careButton').html(`<i title="You have an ongoing chat" class="fa fa-commenting fa-2x">1</i>`);
								if (chatResp?.chatThread) {
									$('.chatFr').addClass('invisible d-none');
									$('.chatFr2').removeClass('invisible d-none');
									$('.chatApp .chatListing').empty();
									for (chatTh of chatResp.chatThread) {
										$('.chatApp .chatListing').prepend(`<div class="chatListMsg ${chatTh.sender == chatResp.chatParent.sender? `meChat pull-left`: `youChat pull-right` }"><strong>${chatTh.sender == chatResp.chatParent.sender? `Me:`: `Admin` } </strong>${chatTh.message}</div><hr/>`);
									}
            						$('.chatMsgLabel').text('Enter your reply here...');
								} else {

								}
								$('.messageTitle').val('');
							}
						});
					}
				}else if($(this).hasClass('chatContinue')){
					let chatMessage = $('#chatMsg').val();
					let arguement = {
						send: true,
						sendMode: 'continue',
						message: chatMessage
					};
					if (chatMessage) {
						$.post('<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/chat_connect', arguement, function(resp) {
							console.log(resp);
							let chatResp = JSON.parse(resp);
							if (chatResp.code == 2) {
								$('.chatApp .chatSave').addClass('chatContinue');
					            $('.chatApp .chatSave').removeClass('chatStart');
					            $('.chatApp .chatSave').text('Send');
					            $('.chatApp .chatEnd').text('End');
					            $('.chat-careButton').html(`<i title="You have an ongoing chat" class="fa fa-commenting fa-2x">1</i>`);
					            if (chatResp?.chatThread) {
					              $('.chatFr').addClass('invisible d-none');
					              $('.chatFr2').removeClass('invisible d-none');
					              $('.chatApp .chatListing').empty();
					              for (chatTh of chatResp.chatThread) {
					                $('.chatApp .chatListing').prepend(`<div class="chatListMsg ${chatTh.sender == chatResp.chatParent.sender? `meChat pull-left`: `youChat pull-right` }">
					                  <strong>${chatTh.sender == chatResp.chatParent.sender? `Me:`: `Admin` } </strong>${chatTh.message}</div><hr/>`);
					              }
					              $('.chatMsgLabel').text('Enter your reply here...');
					            } else {

					            }
					            $('.messageTitle').val('');
							}
						});
					}
				}
			});
			/*End chat Logics*/


	/*Newly Added Js*/
	<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && !in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('admin'))) {?>
		function authenticateUser(dataUserInfo){
			$.post('<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/login_auth', dataUserInfo, (res)=>{
				let ret=JSON.parse(res);
				//console.log(ret);
				if (ret.message=='success' && ret.redirect_url) {
					window.location.href=ret.redirect_url;
				}else{
					window.alert(`${ret.message}`);
				}
			});
		}
	<?php }?>

	/*Event Executor*/
	window.addEventListener('load', () => {
			
		<?php if (!empty($_smarty_tpl->tpl_vars['msg_crime']->value)) {?>
			$('#myModalReport').modal('show');
		<?php }?>
		// windowScroll();
	

	<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('property-form','invest-form','agric-form'))) {?>
			var employees = <?php echo $_smarty_tpl->tpl_vars['employees']->value;?>
;

			function searchRef(array, key){
				var result = '';
				var subArrayIndex;
				
				employees.forEach(element => {
					if(element['refid'])
						var checker = element['refid'].slice(element['refid'].length - 4);
						if(checker == key){
							result = element['refid'];
							subArrayIndex = employees.indexOf(element);
						}
				});					
			   return subArrayIndex;
			}

			$(document).on('change keyup', "#refCode", function() {	
		      var index = searchRef(employees,this.value);
			  if(index){
					$('#employeeid').val(employees[index]['refid']);
				  $('#refname').val(employees[index]['surname'].toUpperCase()+' '+employees[index]['firstname'].toUpperCase());
			  }else{
				$('#refname').val('');
			  }
		    });
	<?php }?>


	<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('events'))) {?>
 
 $(document).ready(function() {
	 var date = new Date();
	 var d = date.getDate();
	 var m = date.getMonth();
	 var y = date.getFullYear();
	 
	 /*  className colors
	 
	 className: default(transparent), important(red), chill(pink), success(green), info(blue)
	 
	 */		
	 
	 
	 /* initialize the external events
	 -----------------------------------------------------------------*/
 
	 $('#external-events div.external-event').each(function() {
	 
		 // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
		 // it doesn't need to have a start or end
		 var eventObject = {
			 title: $.trim($(this).text()) // use the element's text as the event title
		 };
		 
		 // store the Event Object in the DOM element so we can get to it later
		 $(this).data('eventObject', eventObject);
		 
		 // make the event draggable using jQuery UI
		 $(this).draggable({
			 zIndex: 999,
			 revert: true,      // will cause the event to go back to its
			 revertDuration: 0  //  original position after the drag
		 });
		 
	 });
 
 
	 /* initialize the calendar
	 -----------------------------------------------------------------*/
	 let booking_array = '<?php echo $_smarty_tpl->tpl_vars['eve']->value;?>
';
		 booking_array = JSON.parse(booking_array);
	 if(booking_array !== null){
		for(book of booking_array){
		 book.start = new Date(book.eventdate * 1000);
		 book.end = new Date(book.eventdate * 1000);
		 book.className = 'info';
	 	}
	 }

	 var calendar =  $('#calendar').fullCalendar({
		 header: {
			 left: 'title',
			 center: 'agendaDay,agendaWeek,month',
			 right: 'prev,next today'
		 },
		 editable: true,
		 firstDay: 1, //  1(Monday) this can be changed to 0(Sunday) for the USA system
		 selectable: true,
		 defaultView: 'month',
		 
		 axisFormat: 'h:mm',
		 columnFormat: {
			 month: 'ddd',    // Mon
			 week: 'ddd d', // Mon 7
			 day: 'dddd M/d',  // Monday 9/7
			 agendaDay: 'dddd d'
		 },
		 titleFormat: {
			 month: 'MMMM yyyy', // September 2009
			 week: "MMMM yyyy", // September 2009
			 day: 'MMMM yyyy'                  // Tuesday, Sep 8, 2009
		 },
		 allDaySlot: false,
		 selectHelper: true,
		 select: function(start, end, allDay) {
			
					 
		 
 },
		 droppable: true, // this allows things to be dropped onto the calendar !!!
		 drop: function(date, allDay) { // this function is called when something is dropped
		 
			 // retrieve the dropped element's stored Event Object
			 var originalEventObject = $(this).data('eventObject');
			 
			 // we need to copy it, so that multiple events don't have a reference to the same object
			 var copiedEventObject = $.extend({}, originalEventObject);
			 
			 // assign it the date that was reported
			 copiedEventObject.start = date;
			 copiedEventObject.allDay = allDay;
			 
			 // render the event on the calendar
			 // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
			 $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
			 
			 // is the "remove after drop" checkbox checked?
			 if ($('#drop-remove').is(':checked')) {
				 // if so, remove the element from the "Draggable Events" list
				 $(this).remove();
			 }
			 
		 },
		 
		 events: booking_array
 ,

	 });
 });
<?php }?>  

<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('gallery'))) {?>
	
$('.portfolio-menu ul li').click(function(){
         	$('.portfolio-menu ul li').removeClass('active');
         	$(this).addClass('active');
         	
         	var selector = $(this).attr('data-filter');
         	$('.portfolio-item').isotope({
         		filter:selector
         	});
         	return  false;
         });
         $(document).ready(function() {
         var popup_btn = $('.popup-btn');
         popup_btn.magnificPopup({
         type : 'image',
         gallery : {
         	enabled : true
         }
         });
         });

		 <?php }?>  
	<?php if (!empty($_smarty_tpl->tpl_vars['sitePage']->value) && in_array($_smarty_tpl->tpl_vars['sitePage']->value,array('signup'))) {?>
		
	$(document).ready(function(){

			var referees = <?php echo $_smarty_tpl->tpl_vars['referees']->value;?>
;

			function searchRef(array, key){
				var result = '';
				var subArrayIndex;
				
				referees.forEach(element => {
					if(element['userid'])
						var checker = element['userid'];
						if(checker == key){
							result = element['userid'];
							subArrayIndex = referees.indexOf(element);
						}
				});					
			   return subArrayIndex;
			}

			$(document).on('change keyup', ".refid", function() {	
		      var index = searchRef(referees,this.value);
			  if(index){
					$('#refid2').val(referees[index]['userid']);
				  $('#reffullname').val(referees[index]['lastname'].toUpperCase()+' '+referees[index]['firstname'].toUpperCase());
			  }else{
				$('#reffullname').val('');
			  }
		    });

			/*Old Important JS*/
			let globalParam = {};
		    $(document).on('change','#country, #state', function(){
		      let csd={ data: $(this).val(), type: $(this).attr('id') };
		      globalParam={sp: `<?php echo $_smarty_tpl->tpl_vars['sitePage']->value;?>
`, csd: csd};
		      $.post("<?php echo $_smarty_tpl->tpl_vars['Site']->value['siteProtocol'];
echo $_smarty_tpl->tpl_vars['Site']->value['domainName'];?>
/site/inc/json_call.php", globalParam, (res)=> {
		        let ret=JSON.parse(res);
		        //console.log(ret);
		        let target=( $(this).attr('id')=="country"? "#state": "#city");
		        if(ret.length>0 && ret!=null){
		          $(target).empty();
		          for (let re of ret) {
		            $(target).append(`<option value="${re.name}">${re.name}</option>`);
		          }
		        }else{
		          $(target).html(`<option value="">No Record Found</option>`);
		        }
		      });
		    });
			
		    $(document).on('change keyup', "#names1, #names2", function() {
		      $('#username').attr('value', `${$("#names2").val().charAt(0).toLowerCase()}${$("#names1").val().toLowerCase()}`);
		    });
			$(document).on('click','.viewPassword', function(){
				// console.log( $('#password').attr('type')); return false;
			    /*$('#password').attr('type', `${($('#password').attr('type')=='text'?'password':'text')}`);
			    $('#cpassword').attr('type', `${($('#cpassword').attr('type')=='text'?'password':'text')}`);
			    if ($(this).find('i').hasClass('fa-eye')) {
			      $(this).html('<i class="fa fa-no-companion fa-eye-slash"></i> Hide Password');
			    }else{
			      $(this).html('<i class="fa fa-no-companion fa-eye"></i> View Password');
			    }*/
			});
		    $(document).on('change keyup', "#password", function() {
		      $('.genedPass').text(`${$("#password").val()}`);
		    });
			$(document).on('click','.genPassword', function(){
				console.log('click');
			    let genPass=getToken(8);
			    $('#password').attr('value',`${genPass}`).val(genPass);
			     $('#cpassword').attr('value',`${genPass}`).val(genPass);
			    $('.genedPass').text(genPass);
			});
		});
	<?php }?>
		
	/*Old Important JS*/
	$("body").addClass("js");
	let indexer=0;
	window.addEventListener('scroll', function() {
		// windowScroll();
	});
		
		let globalParam={}, obj={};
	    $(document).ready(function() {

	    	$(document).on('change', '#storeNumSelect', function() {
	    		let selectedStore= $('#storeNumSelect option:selected').attr('value');
	    		$('.storeSpan').removeClass('active');
	    		$(`#${selectedStore}`).addClass('active');
	    		// console.log(selectedStore);
	    	});
	    	$(document).on('click', '.storeSpan', function() {
	    		$(this).siblings().removeClass('active');
	    		$(this).toggleClass('active');
	    	});
	    	$(document).on('click', '#findStore', function() {
	    		let selectedStore= $('#storeNumSelect option:selected').attr('value');
	    		$('.storeSpan').removeClass('active');
	    		$(`#${selectedStore}`).addClass('active');
	    	});


	    	$(document).on('mouseover', '#awesome-d0', function() {
	    		$(this).children('div#awesome-d0-effect').removeClass('d-none').addClass('animated slideInDown slower delay-3s');
	    	});
	    	$(document).on('mouseout', '#awesome-d0', function() {
	    		$(this).children('div#awesome-d0-effect').addClass('d-none').removeClass('animated slideInDown slower delay-3s');
	    	});
	    	$(document).on('click', '#applyNow', function() {
	    		let currDetail= {token: $(this).attr('jtk'), jobtitle: $(this).attr('jttl'), company: $(this).attr('jcp')};
	    		// console.log(currDetail);
	    		$("#jobToken").attr('value',currDetail.token);
	    		$("#jobTitle").text(currDetail.jobtitle);
	    	});
	    	$(document).on('click', "#dropdownFacility", function() {
		    	$('.dropdownFacility').toggleClass('d-none');
		    });
			$(document).on('click', '.imgPreview', function() {
				// $("#imgPreviewShow").removeClass('animated slideinRight slower delay-3s');
			    $("#imgPreviewShow").attr('src', `${$(this).attr('src')}`);
			    $("#gallImgName").text(`${$(this).attr('title')}`);
				// $("#imgPreviewShow").delay(1000).addClass('animated slideInRight slower delay-3s');
			});

	    	/*Image Uploader Script*/
		    $(document).on('change', "#uploadImage", function() {
		    	readURL(this, '#imgUploadFrame');
		    	$('#imgUploadFrame').css('width', 'inherit');
		    	$('#imgUploadFrame').css('display', 'block');
		    });
			/*Print Page Section*/
			$(document).on('click',"#printNow", function() {
				$(this).hide();
				printData('printMe', '<?php echo $_smarty_tpl->tpl_vars['Site']->value['companyName'];?>
: Printing');
				$("#printNow").show();
			});
	    	$(document).on('click', ".icon-bar", function() {
	    		$("#nav-menu-container").fadeToggle('slow').toggleClass('showMenu');
	    		if ($("#nav-menu-container").hasClass('showMenu')) {
	    			$('div.icon-bar i.fa').removeClass('fa-bars').addClass('fa-times');
	    		}else {
	    			$('div.icon-bar i.fa').removeClass('fa-times').addClass('fa-bars');
	    		}
	    	});
	    	$(document).on('mouseover', '.btn-success-hover', function() {
	    		$(this).fadeIn('slow');
	    	});
	    });
	});

//generate token
let getToken=function(length) {
    //http://us1.php.net/manual/en/function.openssl-random-pseudo-bytes.php#104322
    let token = "";
    let codeAlphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+=@#$)(%-_/\\";
    for (let i = 0; i < length; i++) {
        token += codeAlphabet[Math.floor((Math.random() * 73) + 1)];
    }
    return token;
}
<?php echo '</script'; ?>
><?php }
}
